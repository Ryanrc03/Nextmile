╔══════════════════════════════════════════════════════════════╗
║          NextMile 域名部署 - 快速参考                          ║
╚══════════════════════════════════════════════════════════════╝

📍 域名信息
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  域名: nextmile.space
  服务器 IP: 18.222.37.37
  注册商: GoDaddy

🔧 部署步骤
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  
  第 1 步：配置 DNS (在 GoDaddy)
  ────────────────────────────────────────────────────
  1. 登录 GoDaddy → 我的产品 → 域名
  2. 选择 nextmile.space → DNS 管理
  3. 添加以下 A 记录:
  
     类型    名称    值              TTL
     ────────────────────────────────────
     A       @       18.222.37.37   600
     A       www     18.222.37.37   600
  
  4. 保存并等待 DNS 生效 (5-30 分钟)
  
  验证 DNS:
  $ dig nextmile.space +short
  # 应该返回: 18.222.37.37

  第 2 步：运行部署脚本
  ────────────────────────────────────────────────────
  $ cd /home/ec2-user/Nextmile
  $ sudo ./deploy_domain.sh
  
  # 脚本会自动完成:
  # ✓ 安装 Certbot
  # ✓ 配置 Nginx
  # ✓ 获取 SSL 证书
  # ✓ 设置自动续期

  第 3 步：启动应用
  ────────────────────────────────────────────────────
  $ cd /home/ec2-user/Nextmile
  $ docker-compose down
  $ docker-compose up -d --build
  $ docker-compose ps

🌐 访问地址
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  前端:        https://nextmile.space
  API 健康:    https://nextmile.space/api/health
  聊天机器人:  https://nextmile.space (底部)

🔍 故障排查命令
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 检查 Nginx
  $ sudo systemctl status nginx
  $ sudo nginx -t
  $ sudo tail -f /var/log/nginx/nextmile.space.error.log
  
  # 检查 Docker
  $ docker-compose ps
  $ docker-compose logs -f
  
  # 检查 SSL
  $ sudo certbot certificates
  
  # 测试连接
  $ curl -I https://nextmile.space
  $ curl https://nextmile.space/api/health

📝 重要文件
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  部署脚本:      ./deploy_domain.sh
  Nginx 配置:    ./nginx/nextmile.space.conf
  前端环境:      ./Frontend/.env.production
  完整文档:      ./DEPLOYMENT_GUIDE.md

🔒 安全检查清单
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  ☑ DNS 已配置
  ☑ 防火墙开放 80/443 端口
  ☑ SSL 证书已获取
  ☑ HTTPS 强制跳转
  ☑ 证书自动续期已配置

💡 常用命令
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  # 重启服务
  $ sudo systemctl restart nginx
  $ docker-compose restart
  
  # 查看日志
  $ sudo tail -f /var/log/nginx/nextmile.space.access.log
  $ docker-compose logs -f frontend
  $ docker-compose logs -f chatbot
  
  # 更新代码
  $ git pull
  $ docker-compose up -d --build

📚 详细文档
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  查看完整部署指南:
  $ cat DEPLOYMENT_GUIDE.md

╔══════════════════════════════════════════════════════════════╗
║  需要帮助？查看 DEPLOYMENT_GUIDE.md 获取详细故障排查步骤       ║
╚══════════════════════════════════════════════════════════════╝
